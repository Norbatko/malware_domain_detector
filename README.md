# Malware Domain Detector
This repostiry contains all files used in bachelor's thesis "**Malware Domains Detection using Machine Learning Methods**".


## Manual for testing the xgboost model
1. Download **python3.10** + **python3.10 venv**
2. Download **mongoDB** and run that service, then use your favourite MongoDB app (for me its Mongo Compass)
3. In the folder **shared/dr-collector/** create virtual enviroment:
```
$ python3.10 -m venv ./venv
$ source ./venv/bin/activate
(venv) $ pip install -r requirements.txt
```
4. Usage is written in README.md in that folder
5. Now go the the second folder in the shared => "**shared/dr-playground**" and create a new virtual enviroment same as in dr-collector
6. Usage is written in README.md in that folder. Main step is in file **config.py**, where you add your collection and it will load that collection from MongoDB.
7. Now you have .parquet files in floor. Copy these files into folder **floor/** in main folder.
8. Create again virtual enviroment in main folder and run command **jupyter notebook**. Open file **domain_detector.ipynb**, where you change the name of the .parquet file and test the model.


## File system of this repository

### Files
- `xgboost.ipynb`: Jupyter Notebook for training and tuning the XGBoost model, showing top features.
- `schema.ipynb`: Jupyter Notebook used for structure of data.
- `config.py`: Python script for loading connection string of MongoDB from .env file.
- `domain_detector.ipynb`: Jupyter Notebook for predicting domains from parquet file.
- `domain_test.ipynb`: Jupyter Notebook for testing only 1 domain by given feature vector.
- `xgboost_model_malware.pkl`: XGBoost trained model in pickle.
- `requirements.txt`: Requirements needed for usage of each notebooks.
- `LICENSE`: MIT License.
- `README.md`: File for usage and file system explanation.

### Folders
- `doc/`: Folder contains the complete latex files for bachelor's thesis and its pdf.
- `floor/`: Folder contains the .parquets files used for training and testing of models.
- `model/`: Folder contains the XGBoost trained model in pickle.
- `shap/`: Folder contains pictures of top features of the XGBoost model.
- `shared/`: Folder contains 2 folders used for collecting and resolving data and the second one for the extraction of features and creating .parquet file.